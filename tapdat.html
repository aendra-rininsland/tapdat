<head>
  <title>TapDat â€” Times Election Dashboard</title>
  <link rel="stylesheet" href="http://www.thetimes.co.uk/fonts/TimesClassicText-Smallcaps-Medium.css"/>
  <link rel="stylesheet" href="http://www.thetimes.co.uk/fonts/TimesModern-Regular.css"/>
</head>

<body>
  {{#if currentUser}}
    {{#unless questionnaireComplete}}
      {{> questionnaire}}

    {{else}}
      {{> faceGrid}}
    {{/unless}}
  {{else}}
    {{> loginButtons}}
  {{/if}}

  {{> usersData}}
</body>

<template name="questionnaire">
  <h1>But first...</h1>
  <p>
    Please fill out the following questionnaire. All data is kept anonymous and used only to improve TapDat.
  </p>

  <form class="new-user-questionnaire">
    <h2>Who did you vote for last election?</h2>
    <div class="voted-for-last-election">
      {{#each parties}}
      <label>{{this.name}}</label>
      <input type="radio" name="lastElection" value="{{this.abbr}}" />
      {{/each}}
      <label>Abstained</label>
      <input type="radio" name="lastElection" value="abstained" />
    </div>

    <h2>Who do you plan to vote for this election?</h2>
    <div class="voting-for-this-election">
      {{#each parties}}
      <label>{{this.name}}</label>
      <input type="radio" name="thisElection" value="{{this.abbr}}" />
      {{/each}}
      <label>Undecided</label>
      <input type="radio" name="thisElection" value="undecided" />
    </div>

    <h2>Lastly, please enter your postcode:</h2>
    <input type="text" name="postcode" />
    <br />

    <input type="submit" value="Save preferences" />

  </form>
</template>

<template name="faceGrid">
  <div class="faceGrid">
    <div id="faces">
      <div class="face-box">
        <div class="face libdem"></div>
      </div>
      <div class="face-box">
        <div class="face labour"></div>
      </div>
      <div class="face-box">
        <div class="face tory"></div>
      </div>
      <div class="face-box">
        <div class="face green"></div>
      </div>
      <div class="face-box">
        <div class="face ukip"></div>
      </div>
      <div class="face-box">
        <div class="face snp"></div>
      </div>
      <div class="face-box">
        <div class="face plaid"></div>
      </div>
      <div class="face-box">
        <a href="graph.html">
          <div class="face worm"></div>
        </a>
      </div>
    </div>
  </div>
</template>

<template name="worm">
  {{#constant}}
  <div id="the-worm"></div>
  {{/constant}}
</template>

<template name="twitterStream">

</template>

<template name="usersData">
  <div class="users-online">
    {{totalCurrentUsers}} users online
  </div>

  <div class="voting-last-election">
    <h4>People online: last election</h4>
    <div class="people-last-election"></div>
  </div>

  <div class="voting-this-election">
    <h4>People online: voting intention</h4>
    <div class="people-this-election"></div>
  </div>
</template>
